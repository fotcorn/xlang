// RUN: %run --split-input-file %s | %filecheck %s

a() {
}
b(): int {
    return 1;
}
c(p1: int) {
}
d(p1: int): int {
    return 2;
}
e(p1: int, p2: int) {
}
f(p1: int, p2: int): int {
    return 3;
}
main() {
    a();
    // CHECK: 1
    printi(b());
    c(1);
    // CHECK: 2
    printi(d(1));
    e(1, 2);
    // CHECK: 3
    printi(f(1, 2));
}

//---------------------------------------

myfunc(): int {
    return 5;
}
main() {
    const i: int = myfunc();
    // CHECK: 5
    printi(i);
}

//---------------------------------------

struct MyStruct {
    a: int,
    b: int,
}

myfunc(): MyStruct {
    var s: MyStruct;
    s.a = 5;
    s.b = 7;
    return s;
}

main() {
    const s: MyStruct = myfunc();
    // CHECK: 5
    printi(s.a);
    // CHECK: 7
    printi(s.b);
}

//---------------------------------------

struct MyStruct {
    a: int,
    b: int,
}

myfunc(s: MyStruct) {
    // CHECK: 5
    printi(s.a);
    // CHECK: 7
    printi(s.b);
}

main() {
    var s: MyStruct;
    s.a = 5;
    s.b = 7;
    myfunc(s);
    // CHECK: 5
    printi(s.a);
    // CHECK: 7
    printi(s.b);
}

//---------------------------------------

struct X {
    a: int,
}
func_ref(x: *X) {
    x.a = 5;
}
main() {
    var x: X;
    x.a = 1;
    func_ref(x);
    // CHECK: 5
    printi(x.a);
}

//---------------------------------------

// reference parameters
test(i: *int) {
    i = i + 1;
}
main() {
    var param: int = 3;
    test(param);
    // CHECK: 4
    printi(param);
}


//---------------------------------------

// reference parameters
test(i: *int) {
    i = i + 1;
}
main() {
    // CHECK: Only variables allowed for reference parameters
    test(5);
}
